<!-- Collections Header -->
<div class="min-h-screen bg-gray-50 dark:bg-gray-900">
  <!-- Hero Section -->
  <div
    class="bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 dark:from-gray-800 dark:via-gray-900 dark:to-black relative overflow-hidden"
  >
    <div
      class="absolute inset-0 bg-black/20 dark:bg-black/40 backdrop-blur-sm"
    ></div>
    <div class="relative px-4 sm:px-6 lg:px-8 py-8 lg:py-12">
      <div class="max-w-7xl mx-auto">
        <div
          class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6 lg:gap-8"
        >
          <!-- Left Side - Title and Description -->
          <div class="flex-1">
            <div class="flex items-center gap-4">
              <div
                class="w-12 h-12 bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg border border-white/30"
              >
                <i class="pi pi-folder text-white text-xl"></i>
              </div>
              <div>
                <h1
                  class="text-3xl lg:text-4xl font-bold text-white tracking-tight"
                >
                  Reading Collections
                </h1>
                <p class="text-white/80 text-sm lg:text-base mt-1">
                  Organize your books into personalized collections
                </p>
              </div>
            </div>
          </div>

          <!-- Right Side - Quick Stats -->
          <div class="flex-shrink-0 w-full lg:w-auto">
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6">
              <div class="text-center">
                <div
                  class="w-14 h-14 lg:w-16 lg:h-16 bg-white/10 backdrop-blur-sm rounded-2xl shadow-lg flex items-center justify-center mb-2 lg:mb-3 border border-white/30 mx-auto"
                >
                  <span class="text-xl lg:text-2xl font-bold text-white">{{
                    stats.totalCollections
                  }}</span>
                </div>
                <p class="text-xs lg:text-sm font-medium text-white/80">
                  Collections
                </p>
              </div>
              <div class="text-center">
                <div
                  class="w-14 h-14 lg:w-16 lg:h-16 bg-white/10 backdrop-blur-sm rounded-2xl shadow-lg flex items-center justify-center mb-2 lg:mb-3 border border-white/30 mx-auto"
                >
                  <span class="text-xl lg:text-2xl font-bold text-white">{{
                    stats.totalBooks
                  }}</span>
                </div>
                <p class="text-xs lg:text-sm font-medium text-white/80">
                  Total Books
                </p>
              </div>
              <div class="text-center">
                <div
                  class="w-14 h-14 lg:w-16 lg:h-16 bg-white/10 backdrop-blur-sm rounded-2xl shadow-lg flex items-center justify-center mb-2 lg:mb-3 border border-white/30 mx-auto"
                >
                  <span class="text-xl lg:text-2xl font-bold text-white">{{
                    stats.publicCollections
                  }}</span>
                </div>
                <p class="text-xs lg:text-sm font-medium text-white/80">
                  Public
                </p>
              </div>
              <div class="text-center">
                <div
                  class="w-14 h-14 lg:w-16 lg:h-16 bg-white/10 backdrop-blur-sm rounded-2xl shadow-lg flex items-center justify-center mb-2 lg:mb-3 border border-white/30 mx-auto"
                >
                  <span class="text-xl lg:text-2xl font-bold text-white">{{
                    stats.averageBooksPerCollection
                  }}</span>
                </div>
                <p class="text-xs lg:text-sm font-medium text-white/80">
                  Avg/Collection
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="px-4 sm:px-6 lg:px-8 py-6 lg:py-8">
    <div class="max-w-7xl mx-auto">
      <!-- Toolbar -->
      <div
        class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 mb-6"
      >
        <div class="p-4 sm:p-6">
          <div
            class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"
          >
            <!-- Left Side - Search and Filters -->
            <div class="flex flex-col sm:flex-row gap-3 flex-1">
              <!-- Search -->
              <div class="relative flex-1 sm:max-w-md">
                <i
                  class="pi pi-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"
                ></i>
                <input
                  type="text"
                  placeholder="Search collections..."
                  [(ngModel)]="globalFilter"
                  (input)="onGlobalFilter($event)"
                  class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                />
              </div>

              <!-- Filters -->
              <div class="flex gap-2">
                <p-select
                  [options]="typeOptions"
                  [(ngModel)]="selectedType"
                  (onChange)="onFilterChange()"
                  placeholder="All Types"
                  class="min-w-[140px]"
                ></p-select>

                <p-select
                  [options]="visibilityOptions"
                  [(ngModel)]="selectedVisibility"
                  (onChange)="onFilterChange()"
                  placeholder="All Visibility"
                  class="min-w-[120px]"
                ></p-select>
              </div>
            </div>

            <!-- Right Side - Actions -->
            <div class="flex items-center gap-2">
              <!-- Sort Options -->
              <p-select
                [options]="sortOptions"
                [(ngModel)]="sortBy"
                (onChange)="onSortChange()"
                class="min-w-[120px]"
              ></p-select>

              <button
                (click)="toggleSortOrder()"
                class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"
                [title]="
                  sortOrder === 'asc' ? 'Sort Ascending' : 'Sort Descending'
                "
              >
                <i
                  class="pi"
                  [class.pi-sort-amount-up]="sortOrder === 'asc'"
                  [class.pi-sort-amount-down]="sortOrder === 'desc'"
                ></i>
              </button>

              <!-- View Mode Toggle -->
              <div
                class="flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1 border border-gray-200 dark:border-gray-600"
              >
                <button
                  (click)="viewMode = 'grid'"
                  [class.bg-white]="viewMode === 'grid'"
                  [class.shadow-sm]="viewMode === 'grid'"
                  [class.text-purple-600]="viewMode === 'grid'"
                  class="p-2 rounded-md transition-all duration-200 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
                >
                  <i class="pi pi-th-large"></i>
                </button>
                <button
                  (click)="viewMode = 'table'"
                  [class.bg-white]="viewMode === 'table'"
                  [class.shadow-sm]="viewMode === 'table'"
                  [class.text-purple-600]="viewMode === 'table'"
                  class="p-2 rounded-md transition-all duration-200 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
                >
                  <i class="pi pi-list"></i>
                </button>
              </div>

              <!-- Action Buttons -->
              <button
                (click)="clearFilters()"
                class="px-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex items-center gap-2"
                title="Clear Filters"
              >
                <i class="pi pi-filter-slash text-sm"></i>
                <span class="hidden sm:inline">Clear</span>
              </button>

              <button
                (click)="refreshData()"
                class="px-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex items-center gap-2"
                title="Refresh"
              >
                <i class="pi pi-refresh text-sm"></i>
                <span class="hidden sm:inline">Refresh</span>
              </button>

              <button
                (click)="createCollection()"
                class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors flex items-center gap-2 shadow-sm"
              >
                <i class="pi pi-plus text-sm"></i>
                <span>New Collection</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Content Area -->
      <div *ngIf="loading" class="text-center py-12">
        <p-progressSpinner
          strokeWidth="3"
          animationDuration="1s"
        ></p-progressSpinner>
        <p class="text-gray-500 mt-4">Loading collections...</p>
      </div>

      <!-- Empty State -->
      <div
        *ngIf="!loading && filteredCollections.length === 0"
        class="text-center py-12"
      >
        <div
          class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-8"
        >
          <div
            class="w-16 h-16 bg-gradient-to-br from-purple-100 to-indigo-100 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-2xl flex items-center justify-center mx-auto mb-4"
          >
            <i
              class="pi pi-folder text-purple-600 dark:text-purple-400 text-2xl"
            ></i>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
            No Collections Found
          </h3>
          <p class="text-gray-500 dark:text-gray-400 mb-6">
            {{
              globalFilter
                ? "No collections match your search criteria."
                : "Start organizing your books by creating your first collection!"
            }}
          </p>
          <button
            (click)="createCollection()"
            class="px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors inline-flex items-center gap-2"
          >
            <i class="pi pi-plus"></i>
            Create Your First Collection
          </button>
        </div>
      </div>

      <!-- Grid View -->
      <div
        *ngIf="
          !loading && filteredCollections.length > 0 && viewMode === 'grid'
        "
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
      >
        <div
          *ngFor="let collection of filteredCollections"
          class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-all duration-200 group cursor-pointer"
          (click)="viewCollection(collection)"
        >
          <!-- Collection Header -->
          <div class="p-6 pb-4">
            <div class="flex items-start justify-between mb-4">
              <div
                class="w-12 h-12 rounded-xl flex items-center justify-center shadow-sm"
                [class.bg-gradient-to-br]="true"
                [class.from-purple-500]="collection.isDefault"
                [class.to-indigo-500]="collection.isDefault"
                [class.from-blue-500]="
                  !collection.isDefault && collection.isPublic
                "
                [class.to-cyan-500]="
                  !collection.isDefault && collection.isPublic
                "
                [class.from-gray-500]="
                  !collection.isDefault && !collection.isPublic
                "
                [class.to-gray-600]="
                  !collection.isDefault && !collection.isPublic
                "
              >
                <i
                  class="text-white text-xl"
                  [class]="'pi ' + getCollectionIcon(collection)"
                ></i>
              </div>

              <!-- Actions Menu -->
              <div class="relative">
                <button
                  (click)="$event.stopPropagation()"
                  class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 opacity-0 group-hover:opacity-100 transition-opacity"
                  [title]="'Collection Actions'"
                >
                  <i class="pi pi-ellipsis-v"></i>
                </button>
                <!-- Dropdown menu can be added here -->
              </div>
            </div>

            <h3
              class="text-lg font-semibold text-gray-900 dark:text-white mb-2 truncate"
            >
              {{ collection.name }}
            </h3>
            <p
              class="text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-2"
            >
              {{ collection.description || "No description" }}
            </p>

            <!-- Collection Meta -->
            <div class="flex items-center justify-between text-sm">
              <div class="flex items-center gap-3">
                <span
                  class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"
                  [class.bg-purple-100]="collection.isDefault"
                  [class.text-purple-800]="collection.isDefault"
                  [class.bg-blue-100]="
                    !collection.isDefault && collection.isPublic
                  "
                  [class.text-blue-800]="
                    !collection.isDefault && collection.isPublic
                  "
                  [class.bg-gray-100]="
                    !collection.isDefault && !collection.isPublic
                  "
                  [class.text-gray-800]="
                    !collection.isDefault && !collection.isPublic
                  "
                  [ngClass]="{
                    'dark:bg-purple-900/20': collection.isDefault,
                    'dark:text-purple-400': collection.isDefault,
                    'dark:bg-blue-900/20':
                      !collection.isDefault && collection.isPublic,
                    'dark:text-blue-400':
                      !collection.isDefault && collection.isPublic,
                    'dark:bg-gray-700':
                      !collection.isDefault && !collection.isPublic,
                    'dark:text-gray-300':
                      !collection.isDefault && !collection.isPublic
                  }"
                >
                  {{ getCollectionTypeLabel(collection) }}
                </span>
                <span
                  class="inline-flex items-center text-xs text-gray-500 dark:text-gray-400"
                >
                  <i
                    class="pi mr-1"
                    [class.pi-lock]="!collection.isPublic"
                    [class.pi-globe]="collection.isPublic"
                  ></i>
                  {{ getVisibilityLabel(collection) }}
                </span>
              </div>
            </div>
          </div>

          <!-- Collection Footer -->
          <div
            class="px-6 py-4 bg-gray-50 dark:bg-gray-700/50 rounded-b-xl border-t border-gray-100 dark:border-gray-600"
          >
            <div class="flex items-center justify-between">
              <div
                class="flex items-center text-sm text-gray-600 dark:text-gray-400"
              >
                <i class="pi pi-book mr-2"></i>
                <span class="font-medium">{{
                  getBookCountText(collection.bookCount || 0)
                }}</span>
              </div>
              <div class="flex gap-2">
                <button
                  (click)="editCollection(collection); $event.stopPropagation()"
                  class="p-1.5 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors"
                  title="Edit Collection"
                >
                  <i class="pi pi-pencil text-xs"></i>
                </button>
                <button
                  (click)="
                    deleteCollection(collection); $event.stopPropagation()
                  "
                  [disabled]="collection.isDefault"
                  class="p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                  title="Delete Collection"
                >
                  <i class="pi pi-trash text-xs"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Table View -->
      <div
        *ngIf="
          !loading && filteredCollections.length > 0 && viewMode === 'table'
        "
        class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"
      >
        <p-table
          #dt
          [value]="filteredCollections"
          [scrollable]="true"
          styleClass="p-datatable-gridlines"
        >
          <ng-template pTemplate="header">
            <tr
              class="bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800"
            >
              <th class="px-6 py-4 text-left font-semibold">
                <div class="flex items-center gap-2">
                  <i class="pi pi-folder text-purple-500"></i>
                  Collection
                </div>
              </th>
              <th class="px-6 py-4 text-left font-semibold">
                <div class="flex items-center gap-2">
                  <i class="pi pi-info-circle text-purple-500"></i>
                  Description
                </div>
              </th>
              <th class="px-6 py-4 text-center font-semibold">
                <div class="flex items-center justify-center gap-2">
                  <i class="pi pi-book text-purple-500"></i>
                  Books
                </div>
              </th>
              <th class="px-6 py-4 text-center font-semibold">
                <div class="flex items-center justify-center gap-2">
                  <i class="pi pi-tag text-purple-500"></i>
                  Type
                </div>
              </th>
              <th class="px-6 py-4 text-center font-semibold">
                <div class="flex items-center justify-center gap-2">
                  <i class="pi pi-eye text-purple-500"></i>
                  Visibility
                </div>
              </th>
              <th class="px-6 py-4 text-center font-semibold">
                <div class="flex items-center justify-center gap-2">
                  <i class="pi pi-calendar text-purple-500"></i>
                  Created
                </div>
              </th>
              <th class="px-6 py-4 text-center font-semibold">Actions</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-collection>
            <tr
              class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"
            >
              <td class="px-6 py-4">
                <div class="flex items-center gap-3">
                  <div
                    class="w-10 h-10 rounded-lg flex items-center justify-center shadow-sm"
                    [class.bg-gradient-to-br]="true"
                    [class.from-purple-500]="collection.isDefault"
                    [class.to-indigo-500]="collection.isDefault"
                    [class.from-blue-500]="
                      !collection.isDefault && collection.isPublic
                    "
                    [class.to-cyan-500]="
                      !collection.isDefault && collection.isPublic
                    "
                    [class.from-gray-500]="
                      !collection.isDefault && !collection.isPublic
                    "
                    [class.to-gray-600]="
                      !collection.isDefault && !collection.isPublic
                    "
                  >
                    <i
                      class="text-white"
                      [class]="'pi ' + getCollectionIcon(collection)"
                    ></i>
                  </div>
                  <div>
                    <button
                      (click)="viewCollection(collection)"
                      class="font-semibold text-gray-900 dark:text-white hover:text-purple-600 dark:hover:text-purple-400 transition-colors"
                    >
                      {{ collection.name }}
                    </button>
                  </div>
                </div>
              </td>
              <td class="px-6 py-4">
                <span class="text-gray-600 dark:text-gray-400 text-sm">
                  {{ collection.description || "No description" }}
                </span>
              </td>
              <td class="px-6 py-4 text-center">
                <span
                  class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"
                >
                  {{ collection.bookCount || 0 }}
                </span>
              </td>
              <td class="px-6 py-4 text-center">
                <span
                  class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"
                  [class.bg-purple-100]="collection.isDefault"
                  [class.text-purple-800]="collection.isDefault"
                  [class.bg-gray-100]="!collection.isDefault"
                  [class.text-gray-800]="!collection.isDefault"
                  [ngClass]="{
                    'dark:bg-purple-900/20': collection.isDefault,
                    'dark:text-purple-400': collection.isDefault,
                    'dark:bg-gray-700': !collection.isDefault,
                    'dark:text-gray-300': !collection.isDefault
                  }"
                >
                  {{ getCollectionTypeLabel(collection) }}
                </span>
              </td>
              <td class="px-6 py-4 text-center">
                <span
                  class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"
                  [class.bg-green-100]="collection.isPublic"
                  [class.text-green-800]="collection.isPublic"
                  [class.bg-gray-100]="!collection.isPublic"
                  [class.text-gray-800]="!collection.isPublic"
                  [ngClass]="{
                    'dark:bg-green-900/20': collection.isPublic,
                    'dark:text-green-400': collection.isPublic,
                    'dark:bg-gray-700': !collection.isPublic,
                    'dark:text-gray-300': !collection.isPublic
                  }"
                >
                  <i
                    class="mr-1"
                    [class.pi-globe]="collection.isPublic"
                    [class.pi-lock]="!collection.isPublic"
                  ></i>
                  {{ getVisibilityLabel(collection) }}
                </span>
              </td>
              <td class="px-6 py-4 text-center">
                <span class="text-gray-600 dark:text-gray-400 text-sm">
                  {{ collection.createdAt | date : "mediumDate" }}
                </span>
              </td>
              <td class="px-6 py-4 text-center">
                <div class="flex items-center justify-center gap-2">
                  <button
                    (click)="viewCollection(collection)"
                    class="p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors"
                    title="View Collection"
                  >
                    <i class="pi pi-eye text-sm"></i>
                  </button>
                  <button
                    (click)="editCollection(collection)"
                    class="p-2 text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors"
                    title="Edit Collection"
                  >
                    <i class="pi pi-pencil text-sm"></i>
                  </button>
                  <button
                    (click)="deleteCollection(collection)"
                    [disabled]="collection.isDefault"
                    class="p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                    title="Delete Collection"
                  >
                    <i class="pi pi-trash text-sm"></i>
                  </button>
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
</div>

<!-- Create Collection Dialog -->
<p-dialog
  [(visible)]="showCreateDialog"
  [header]="'Create New Collection'"
  [modal]="true"
  [style]="{ width: '500px' }"
  [draggable]="false"
  [resizable]="false"
  styleClass="custom-dialog"
>
  <div class="space-y-6">
    <div class="space-y-2">
      <label
        class="block text-sm font-semibold text-gray-700 dark:text-gray-200"
      >
        <i class="pi pi-tag text-purple-500 mr-2"></i>
        Collection Name *
      </label>
      <input
        type="text"
        [(ngModel)]="collectionForm.name"
        placeholder="Enter collection name"
        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"
        maxlength="255"
      />
    </div>

    <div class="space-y-2">
      <label
        class="block text-sm font-semibold text-gray-700 dark:text-gray-200"
      >
        <i class="pi pi-info-circle text-purple-500 mr-2"></i>
        Description
      </label>
      <textarea
        [(ngModel)]="collectionForm.description"
        placeholder="Describe your collection (optional)"
        rows="3"
        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"
      ></textarea>
    </div>

    <div class="flex items-center space-x-3">
      <p-checkbox
        [(ngModel)]="collectionForm.isPublic"
        [binary]="true"
        inputId="isPublic"
      ></p-checkbox>
      <label
        for="isPublic"
        class="text-sm text-gray-700 dark:text-gray-200 cursor-pointer"
      >
        <i class="pi pi-globe text-blue-500 mr-2"></i>
        Make this collection public
      </label>
    </div>
    <p class="text-xs text-gray-500 dark:text-gray-400 -mt-2">
      Public collections can be viewed by other users
    </p>
  </div>

  <ng-template pTemplate="footer">
    <div class="flex justify-end gap-3">
      <button
        (click)="closeDialogs()"
        class="px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"
      >
        Cancel
      </button>
      <button
        (click)="saveCollection()"
        class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors"
      >
        Create Collection
      </button>
    </div>
  </ng-template>
</p-dialog>

<!-- Edit Collection Dialog -->
<p-dialog
  [(visible)]="showEditDialog"
  [header]="'Edit Collection'"
  [modal]="true"
  [style]="{ width: '500px' }"
  [draggable]="false"
  [resizable]="false"
  styleClass="custom-dialog"
>
  <div class="space-y-6">
    <div class="space-y-2">
      <label
        class="block text-sm font-semibold text-gray-700 dark:text-gray-200"
      >
        <i class="pi pi-tag text-purple-500 mr-2"></i>
        Collection Name *
      </label>
      <input
        type="text"
        [(ngModel)]="collectionForm.name"
        placeholder="Enter collection name"
        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"
        maxlength="255"
      />
    </div>

    <div class="space-y-2">
      <label
        class="block text-sm font-semibold text-gray-700 dark:text-gray-200"
      >
        <i class="pi pi-info-circle text-purple-500 mr-2"></i>
        Description
      </label>
      <textarea
        [(ngModel)]="collectionForm.description"
        placeholder="Describe your collection (optional)"
        rows="3"
        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"
      ></textarea>
    </div>

    <div class="flex items-center space-x-3">
      <p-checkbox
        [(ngModel)]="collectionForm.isPublic"
        [binary]="true"
        inputId="isPublicEdit"
      ></p-checkbox>
      <label
        for="isPublicEdit"
        class="text-sm text-gray-700 dark:text-gray-200 cursor-pointer"
      >
        <i class="pi pi-globe text-blue-500 mr-2"></i>
        Make this collection public
      </label>
    </div>
    <p class="text-xs text-gray-500 dark:text-gray-400 -mt-2">
      Public collections can be viewed by other users
    </p>
  </div>

  <ng-template pTemplate="footer">
    <div class="flex justify-end gap-3">
      <button
        (click)="closeDialogs()"
        class="px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"
      >
        Cancel
      </button>
      <button
        (click)="saveCollection()"
        class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors"
      >
        Update Collection
      </button>
    </div>
  </ng-template>
</p-dialog>

<!-- Toast Messages -->
<p-toast></p-toast>

<!-- Confirmation Dialog -->
<p-confirmDialog></p-confirmDialog>
