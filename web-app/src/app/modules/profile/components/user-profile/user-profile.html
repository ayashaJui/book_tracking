<!-- Modern User Profile UI - Clean & Functional -->
<div class="min-h-screen">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Profile Header -->
    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 mb-8">
      <div class="flex flex-col lg:flex-row items-center gap-8">
        <!-- Avatar Section -->
        <div class="relative group">
          <div
            class="w-32 h-32 rounded-full overflow-hidden ring-4 ring-blue-500 shadow-2xl cursor-pointer"
            (click)="fileInput.click()"
            title="Click to change avatar"
          >
            <img
              [src]="user.avatarUrl || 'assets/images/product-not-found.png'"
              alt="Profile Avatar"
              class="w-full h-full object-cover"
            />
          </div>
          <button
            (click)="fileInput.click()"
            class="absolute -bottom-2 -right-2 w-10 h-10 bg-blue-500 hover:bg-blue-600 text-white rounded-full shadow-lg flex items-center justify-center transition-colors"
            title="Change Avatar"
          >
            <i class="pi pi-camera"></i>
          </button>
          <input
            #fileInput
            type="file"
            accept="image/*"
            class="hidden"
            (change)="onAvatarChange($event)"
          />
        </div>

        <!-- Profile Info -->
        <div class="flex-1 text-center lg:text-left">
          <div class="mb-4">
            <h1
              class="text-4xl font-bold text-gray-900 dark:text-white mb-2"
              [class.cursor-pointer]="isEditMode"
              [class.hover:text-blue-600]="isEditMode"
              (click)="isEditMode ? updateUserName() : null"
              [title]="isEditMode ? 'Click to edit name' : ''"
            >
              {{ user.name }}
              <i
                *ngIf="isEditMode"
                class="pi pi-pencil text-lg ml-2 text-blue-500"
              ></i>
            </h1>
            <div
              class="flex flex-wrap items-center justify-center lg:justify-start gap-4 text-gray-600 dark:text-gray-400"
            >
              <span
                class="flex items-center gap-2"
                [class.cursor-pointer]="isEditMode"
                [class.hover:text-blue-600]="isEditMode"
                (click)="isEditMode ? updateUserLocation() : null"
                [title]="isEditMode ? 'Click to edit location' : ''"
              >
                <i class="pi pi-map-marker text-blue-500"></i>
                {{ user.location }}
                <i
                  *ngIf="isEditMode"
                  class="pi pi-pencil text-sm text-blue-500"
                ></i>
              </span>
              <span class="flex items-center gap-2">
                <i class="pi pi-calendar text-blue-500"></i>
                Joined {{ user.joined }}
              </span>
            </div>
          </div>

          <div class="flex flex-wrap gap-3 justify-center lg:justify-start">
            <button
              icon="pi pi-pencil"
              pButton
              (click)="editProfile()"
              [severity]="isEditMode ? 'success' : 'primary'"
            >
              {{ isEditMode ? "Save Profile" : "Edit Profile" }}
            </button>
            <button
              pButton
              icon="pi pi-share-alt"
              severity="contrast"
              (click)="copyShareLink()"
            >
              Share Profile
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Stats Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- Books Read -->
      <div
        class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer"
        (click)="onStatsCardClick('booksRead')"
        title="View read books"
      >
        <div class="flex items-center justify-between mb-4">
          <div
            class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"
          >
            <i class="pi pi-book text-blue-600 dark:text-blue-400 text-xl"></i>
          </div>
        </div>
        <div class="text-3xl font-bold text-gray-900 dark:text-white mb-1">
          {{ user.stats.booksRead }}
        </div>
        <div class="text-sm text-gray-500 dark:text-gray-400">Books Read</div>
      </div>

      <!-- Total Owned -->
      <div
        class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer"
        (click)="onStatsCardClick('totalOwned')"
        title="View owned books"
      >
        <div class="flex items-center justify-between mb-4">
          <div
            class="w-12 h-12 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center"
          >
            <i
              class="pi pi-home text-emerald-600 dark:text-emerald-400 text-xl"
            ></i>
          </div>
        </div>
        <div class="text-3xl font-bold text-gray-900 dark:text-white mb-1">
          {{ user.stats.totalOwned }}
        </div>
        <div class="text-sm text-gray-500 dark:text-gray-400">Total Owned</div>
      </div>

      <!-- Quotes -->
      <div
        class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer"
        (click)="onStatsCardClick('quotes')"
        title="View saved quotes"
      >
        <div class="flex items-center justify-between mb-4">
          <div
            class="w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center"
          >
            <i
              class="pi pi-heart text-purple-600 dark:text-purple-400 text-xl"
            ></i>
          </div>
        </div>
        <div class="text-3xl font-bold text-gray-900 dark:text-white mb-1">
          {{ user.stats.quotes }}
        </div>
        <div class="text-sm text-gray-500 dark:text-gray-400">Quotes Saved</div>
      </div>

      <!-- Average Rating -->
      <div
        class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer"
        (click)="onStatsCardClick('avgRating')"
        title="View reviews"
      >
        <div class="flex items-center justify-between mb-4">
          <div
            class="w-12 h-12 bg-amber-100 dark:bg-amber-900 rounded-full flex items-center justify-center"
          >
            <i
              class="pi pi-star text-amber-600 dark:text-amber-400 text-xl"
            ></i>
          </div>
        </div>
        <div class="text-3xl font-bold text-gray-900 dark:text-white mb-1">
          {{ user.stats.avgRating }}
        </div>
        <div class="text-sm text-gray-500 dark:text-gray-400">Avg Rating</div>
      </div>
    </div>

    <!-- Goals Section -->
    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 mb-8">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
        Reading Goals & Progress
      </h2>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Annual Goal -->
        <div class="text-center">
          <div class="mb-4">
            <h3
              class="text-lg font-semibold text-gray-900 dark:text-white mb-2"
            >
              Annual Goal
            </h3>
            <div
              class="text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2 cursor-pointer hover:text-blue-700 dark:hover:text-blue-300"
              (click)="updateAnnualGoal()"
              title="Click to update goal"
            >
              {{ user.stats.booksRead }} / {{ user.goals.annual }}
            </div>
            <div class="text-sm text-gray-500 dark:text-gray-400">
              books this year
            </div>
          </div>
          <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
            <div
              class="bg-blue-500 h-3 rounded-full transition-all duration-300"
              [style.width.%]="annualProgressPct"
            ></div>
          </div>
          <div class="text-xs text-gray-500 dark:text-gray-400 mt-2">
            {{ annualProgressPct }}% complete
          </div>
        </div>

        <!-- Reading Streak -->
        <div class="text-center">
          <div class="mb-4">
            <h3
              class="text-lg font-semibold text-gray-900 dark:text-white mb-2"
            >
              Reading Streak
            </h3>
            <div
              class="text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-2"
            >
              {{ user.goals.streak }}
            </div>
            <div class="text-sm text-gray-500 dark:text-gray-400">
              days in a row
            </div>
          </div>
          <div
            class="w-20 h-20 mx-auto border-4 border-emerald-500 rounded-full flex items-center justify-center"
          >
            <span class="text-emerald-600 dark:text-emerald-400 font-bold"
              >{{ streakProgressPct }}%</span
            >
          </div>
        </div>

        <!-- Top Genre -->
        <div class="text-center">
          <div class="mb-4">
            <h3
              class="text-lg font-semibold text-gray-900 dark:text-white mb-2"
            >
              Reading Insights
            </h3>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-gray-600 dark:text-gray-400">Top Genre:</span>
                <span class="font-medium text-gray-900 dark:text-white">{{
                  user.readerStats.topGenre
                }}</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-600 dark:text-gray-400"
                  >Avg Rating:</span
                >
                <span class="font-medium text-gray-900 dark:text-white"
                  >{{ user.stats.avgRating }} ⭐</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-600 dark:text-gray-400">Pages/Day:</span>
                <span class="font-medium text-gray-900 dark:text-white"
                  >45</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Featured Book -->
    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 mb-8">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
        Featured Book
      </h2>

      <div class="flex flex-col lg:flex-row items-center gap-8">
        <div class="flex-shrink-0">
          <img
            [src]="featured.coverUrl || 'assets/images/product-not-found.png'"
            alt="Featured book cover"
            class="w-40 h-56 object-cover rounded-xl shadow-lg cursor-pointer hover:shadow-2xl transition-shadow"
            (click)="onFeaturedBookClick()"
            title="Click to view book details"
          />
        </div>

        <div class="flex-1 text-center lg:text-left">
          <h3
            class="text-2xl font-bold text-gray-900 dark:text-white mb-2 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
            (click)="onFeaturedBookClick()"
            title="Click to view book details"
          >
            {{ featured.title }}
          </h3>
          <p class="text-lg text-gray-600 dark:text-gray-400 mb-4">
            by {{ featured.author }}
          </p>

          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6">
            <blockquote class="italic text-gray-700 dark:text-gray-300">
              "{{ featured.quote }}"
            </blockquote>
          </div>

          <div class="flex flex-wrap gap-3 justify-center lg:justify-start">
            <button
              class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors"
              (click)="viewFeaturedBookDetails()"
            >
              View Details
            </button>
            <button
              class="px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors"
              (click)="addNoteToFeaturedBook()"
            >
              Add Note
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 mb-8">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
        Quick Actions
      </h2>

      <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
        <!-- Reading Log -->
        <div
          (click)="navigateTo('reading-log')"
          class="cursor-pointer group bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl p-6 hover:shadow-lg transition-all"
        >
          <div class="text-center">
            <div
              class="w-16 h-16 mx-auto bg-blue-500 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"
            >
              <i class="pi pi-book text-white text-2xl"></i>
            </div>
            <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
              Reading Log
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Track your reading history
            </p>
          </div>
        </div>

        <!-- Tag Management -->
        <div
          (click)="navigateTo('tags')"
          class="cursor-pointer group bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl p-6 hover:shadow-lg transition-all"
        >
          <div class="text-center">
            <div
              class="w-16 h-16 mx-auto bg-purple-500 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"
            >
              <i class="pi pi-tags text-white text-2xl"></i>
            </div>
            <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
              Tag Management
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Organize your books
            </p>
          </div>
        </div>

        <!-- Budget Control -->
        <div
          (click)="navigateTo('budget')"
          class="cursor-pointer group bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-2xl p-6 hover:shadow-lg transition-all"
        >
          <div class="text-center">
            <div
              class="w-16 h-16 mx-auto bg-emerald-500 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"
            >
              <i class="pi pi-wallet text-white text-2xl"></i>
            </div>
            <h3 class="font-semibold text-gray-900 dark:text-white mb-2">
              Budget Control
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Monitor spending
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Social Links -->
    <div class="text-center">
      <div
        class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg inline-flex items-center gap-4 px-8 py-4"
      >
        <span class="text-gray-600 dark:text-gray-400 font-medium"
          >Connect:</span
        >

        <a
          *ngIf="user.social.goodreads"
          [href]="user.social.goodreads"
          target="_blank"
          (click)="
            !isEditMode
              ? openSocialLink('goodreads')
              : updateSocialLink('goodreads');
            $event.preventDefault()
          "
          class="w-10 h-10 bg-emerald-500 hover:bg-emerald-600 rounded-full flex items-center justify-center text-white transition-colors relative"
          [title]="
            isEditMode
              ? 'Click to edit Goodreads URL'
              : 'View Goodreads Profile'
          "
        >
          <i class="pi pi-book"></i>
          <i
            *ngIf="isEditMode"
            class="pi pi-pencil absolute -top-1 -right-1 text-xs bg-blue-500 rounded-full p-1"
          ></i>
        </a>

        <a
          *ngIf="user.social.instagram"
          [href]="user.social.instagram"
          target="_blank"
          (click)="
            !isEditMode
              ? openSocialLink('instagram')
              : updateSocialLink('instagram');
            $event.preventDefault()
          "
          class="w-10 h-10 bg-pink-500 hover:bg-pink-600 rounded-full flex items-center justify-center text-white transition-colors relative"
          [title]="
            isEditMode
              ? 'Click to edit Instagram URL'
              : 'View Instagram Profile'
          "
        >
          <i class="pi pi-instagram"></i>
          <i
            *ngIf="isEditMode"
            class="pi pi-pencil absolute -top-1 -right-1 text-xs bg-blue-500 rounded-full p-1"
          ></i>
        </a>

        <a
          *ngIf="user.social.linkedin"
          [href]="user.social.linkedin"
          target="_blank"
          (click)="
            !isEditMode
              ? openSocialLink('linkedin')
              : updateSocialLink('linkedin');
            $event.preventDefault()
          "
          class="w-10 h-10 bg-blue-600 hover:bg-blue-700 rounded-full flex items-center justify-center text-white transition-colors relative"
          [title]="
            isEditMode ? 'Click to edit LinkedIn URL' : 'View LinkedIn Profile'
          "
        >
          <i class="pi pi-linkedin"></i>
          <i
            *ngIf="isEditMode"
            class="pi pi-pencil absolute -top-1 -right-1 text-xs bg-blue-500 rounded-full p-1"
          ></i>
        </a>

        <!-- Add social link buttons when in edit mode -->
        <button
          *ngIf="isEditMode && !user.social.goodreads"
          (click)="updateSocialLink('goodreads')"
          class="w-10 h-10 bg-gray-300 hover:bg-emerald-500 rounded-full flex items-center justify-center text-gray-600 hover:text-white transition-colors"
          title="Add Goodreads URL"
        >
          <i class="pi pi-plus"></i>
        </button>

        <button
          *ngIf="isEditMode && !user.social.instagram"
          (click)="updateSocialLink('instagram')"
          class="w-10 h-10 bg-gray-300 hover:bg-pink-500 rounded-full flex items-center justify-center text-gray-600 hover:text-white transition-colors"
          title="Add Instagram URL"
        >
          <i class="pi pi-plus"></i>
        </button>

        <button
          *ngIf="isEditMode && !user.social.linkedin"
          (click)="updateSocialLink('linkedin')"
          class="w-10 h-10 bg-gray-300 hover:bg-blue-600 rounded-full flex items-center justify-center text-gray-600 hover:text-white transition-colors"
          title="Add LinkedIn URL"
        >
          <i class="pi pi-plus"></i>
        </button>
      </div>
    </div>
  </div>
</div>
