<div class="min-h-screen">
  <!-- Modern Header Section -->
  <div
    class="max-w-7xl mx-auto relative overflow-hidden bg-white rounded-2xl dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700"
  >
    <!-- Background Pattern -->
    <div
      class="absolute inset-0 bg-gradient-to-br from-gray-50 via-emerald-50 to-teal-100 dark:from-gray-800 dark:via-gray-900 dark:to-gray-900"
    ></div>
    <div class="absolute inset-0 opacity-30 dark:opacity-10">
      <div
        class="w-full h-full"
        style="
          background-image: radial-gradient(
            circle at 1px 1px,
            rgba(16, 185, 129, 0.3) 1px,
            transparent 0
          );
          background-size: 20px 20px;
        "
      ></div>
    </div>

    <div class="relative px-4 sm:px-6 lg:px-8 py-8 lg:py-12">
      <div class="max-w-7xl mx-auto">
        <div
          class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6 lg:gap-8"
        >
          <!-- Left Side - Title and Description -->
          <div class="flex-1">
            <div class="flex items-center gap-4">
              <div
                class="w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center shadow-lg"
              >
                <i class="pi pi-star-fill text-white text-xl"></i>
              </div>
              <div>
                <h1
                  class="text-3xl lg:text-4xl font-bold text-gray-800 dark:text-white tracking-tight"
                >
                  Reviews & Insights
                </h1>
                <p
                  class="text-gray-600 dark:text-gray-300 text-sm lg:text-base mt-1"
                >
                  Document your reading journey with thoughtful reviews and
                  actionable insights
                </p>
              </div>
            </div>
          </div>

          <!-- Right Side - Quick Stats -->
          <div class="flex-shrink-0 w-full lg:w-auto">
            <div class="grid grid-cols-3 gap-4 lg:gap-6">
              <div class="text-center">
                <div
                  class="w-14 h-14 lg:w-16 lg:h-16 bg-white dark:bg-gray-800 rounded-2xl shadow-lg flex items-center justify-center mb-2 lg:mb-3 border border-gray-200 dark:border-gray-700 mx-auto"
                >
                  <span
                    class="text-xl lg:text-2xl font-bold text-blue-600 dark:text-blue-300"
                    >{{ reviews.length }}</span
                  >
                </div>
                <p
                  class="text-xs lg:text-sm font-medium text-gray-600 dark:text-gray-300"
                >
                  Reviews
                </p>
              </div>
              <div class="text-center">
                <div
                  class="w-14 h-14 lg:w-16 lg:h-16 bg-white dark:bg-gray-800 rounded-2xl shadow-lg flex items-center justify-center mb-2 lg:mb-3 border border-gray-200 dark:border-gray-700 mx-auto"
                >
                  <span
                    class="text-xl lg:text-2xl font-bold text-amber-600 dark:text-amber-300"
                    >{{ averageRating | number : "1.1-1" }}</span
                  >
                </div>
                <p
                  class="text-xs lg:text-sm font-medium text-gray-600 dark:text-gray-300"
                >
                  Avg Rating
                </p>
              </div>
              <div class="text-center">
                <div
                  class="w-14 h-14 lg:w-16 lg:h-16 bg-white dark:bg-gray-800 rounded-2xl shadow-lg flex items-center justify-center mb-2 lg:mb-3 border border-gray-200 dark:border-gray-700 mx-auto"
                >
                  <span
                    class="text-xl lg:text-2xl font-bold text-emerald-600 dark:text-emerald-300"
                    >{{ recommendRate }}%</span
                  >
                </div>
                <p
                  class="text-xs lg:text-sm font-medium text-gray-600 dark:text-gray-300"
                >
                  Recommend
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Container -->
  <div class="max-w-7xl mx-auto py-6 lg:py-8">
    <!-- Action Buttons -->
    <div class="mb-8">
      <div
        class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"
      >
        <div class="flex items-center gap-4">
          <h2 class="text-xl font-semibold text-gray-800 dark:text-white">
            All Reviews
          </h2>
        </div>
        <div class="flex gap-2">
          <p-button
            label="Add Review"
            icon="pi pi-plus"
            size="small"
            (onClick)="addReviewPage()"
            severity="success"
          >
          </p-button>
          <!-- <p-button
            label="Quick Add"
            icon="pi pi-plus-circle"
            size="small"
            (onClick)="showReviewForm = true"
            outlined
            severity="success"
          >
          </p-button> -->
        </div>
      </div>
    </div>

    <!-- Enhanced Filters Section -->
    <div
      class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm mb-8 overflow-hidden"
    >
      <!-- Filter Header -->
      <div
        class="px-4 sm:px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50"
      >
        <div
          class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3"
        >
          <div class="flex items-center gap-3">
            <i class="pi pi-filter text-gray-600 dark:text-gray-400"></i>
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
              Filter & Search Reviews
            </h3>
            <p-tag
              [value]="filteredReviews.length + ' results'"
              severity="info"
              class="text-xs"
            ></p-tag>
          </div>
          <p-button
            *ngIf="filterText || filterRating || filterRecommend"
            label="Clear All"
            icon="pi pi-times"
            size="small"
            outlined
            severity="secondary"
            (onClick)="clearFilters()"
          >
          </p-button>
        </div>
      </div>

      <!-- Filter Controls -->
      <div class="p-4 sm:p-6">
        <div class="space-y-4 lg:space-y-0 lg:grid lg:gap-6 lg:grid-cols-4">
          <!-- Search Input -->
          <div class="lg:col-span-2">
            <label
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              <i class="pi pi-search mr-1 text-xs"></i>
              Search Reviews
            </label>
            <span class="p-input-icon-left w-full">
              <input
                pInputText
                [(ngModel)]="filterText"
                (input)="applyFilters()"
                placeholder="Search by book title, author, or takeaways..."
                class="w-full"
                name="filterText"
              />
            </span>
          </div>

          <!-- Rating Filter -->
          <div>
            <label
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              <i class="pi pi-star mr-1 text-xs"></i>
              Rating
            </label>
            <p-select
              [options]="ratingOptions"
              [(ngModel)]="filterRating"
              placeholder="Any rating"
              (onChange)="applyFilters()"
              [showClear]="true"
              name="filterRating"
              styleClass="w-full"
            >
              <ng-template pTemplate="selectedItem" let-selectedOption>
                <div class="flex items-center gap-2" *ngIf="selectedOption">
                  <p-rating
                    [ngModel]="selectedOption.value"
                    [readonly]="true"
                    class="scale-75 origin-left"
                  ></p-rating>
                  <span class="text-sm">{{ selectedOption.label }}</span>
                </div>
              </ng-template>
              <ng-template pTemplate="item" let-option>
                <div class="flex items-center gap-2">
                  <p-rating
                    [ngModel]="option.value"
                    [readonly]="true"
                    class="scale-75 origin-left"
                  ></p-rating>
                  <span class="text-sm">{{ option.label }}</span>
                </div>
              </ng-template>
            </p-select>
          </div>

          <!-- Recommendation Filter -->
          <div>
            <label
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              <i class="pi pi-thumbs-up mr-1 text-xs"></i>
              Recommendation
            </label>
            <p-select
              [options]="recommendOptions"
              [(ngModel)]="filterRecommend"
              placeholder="Any recommendation"
              (onChange)="applyFilters()"
              [showClear]="true"
              name="filterRecommend"
              styleClass="w-full"
            >
              <ng-template pTemplate="selectedItem" let-selectedOption>
                <div class="flex items-center gap-2" *ngIf="selectedOption">
                  <i
                    [class]="
                      selectedOption.value
                        ? 'pi pi-thumbs-up text-emerald-600'
                        : 'pi pi-thumbs-down text-red-600'
                    "
                  ></i>
                  <span class="text-sm">{{ selectedOption.label }}</span>
                </div>
              </ng-template>
              <ng-template pTemplate="item" let-option>
                <div class="flex items-center gap-2">
                  <i
                    [class]="
                      option.value
                        ? 'pi pi-thumbs-up text-emerald-600'
                        : 'pi pi-thumbs-down text-red-600'
                    "
                  ></i>
                  <span class="text-sm">{{ option.label }}</span>
                </div>
              </ng-template>
            </p-select>
          </div>
        </div>

        <!-- Active Filters Display (Mobile) -->
        <div
          class="mt-4 lg:hidden"
          *ngIf="filterText || filterRating || filterRecommend"
        >
          <div class="flex flex-wrap gap-2">
            <div
              *ngIf="filterText"
              class="inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 text-xs rounded-lg"
            >
              <span>Search: {{ filterText }}</span>
              <button
                type="button"
                class="ml-1 text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100"
                (click)="filterText = ''; applyFilters()"
                aria-label="Remove search filter"
              >
                <i class="pi pi-times text-xs"></i>
              </button>
            </div>
            <div
              *ngIf="filterRating"
              class="inline-flex items-center gap-1 px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200 text-xs rounded-lg"
            >
              <span>Rating: {{ filterRating }}★</span>
              <button
                type="button"
                class="ml-1 text-amber-600 dark:text-amber-300 hover:text-amber-800 dark:hover:text-amber-100"
                (click)="filterRating = null; applyFilters()"
                aria-label="Remove rating filter"
              >
                <i class="pi pi-times text-xs"></i>
              </button>
            </div>
            <div
              *ngIf="filterRecommend !== null"
              class="inline-flex items-center gap-1 px-2 py-1 text-xs rounded-lg"
              [class]="
                filterRecommend
                  ? 'bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-200'
                  : 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200'
              "
            >
              <span>{{
                filterRecommend ? "Recommended" : "Not Recommended"
              }}</span>
              <button
                type="button"
                [class]="
                  filterRecommend
                    ? 'ml-1 text-emerald-600 dark:text-emerald-300 hover:text-emerald-800 dark:hover:text-emerald-100'
                    : 'ml-1 text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100'
                "
                (click)="filterRecommend = null; applyFilters()"
                aria-label="Remove recommendation filter"
              >
                <i class="pi pi-times text-xs"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Sort Options and Results Count -->
        <div
          class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"
        >
          <div
            class="flex flex-col sm:flex-row items-start sm:items-center gap-3 w-full sm:w-auto"
          >
            <label
              class="text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap"
            >
              <i class="pi pi-sort-alt mr-1 text-xs"></i>
              Sort by:
            </label>
            <p-select
              [options]="sortOptions"
              [(ngModel)]="sortBy"
              (onChange)="applySorting()"
              appendTo="body"
              placeholder="Date (newest first)"
              styleClass="w-full sm:min-w-48"
            >
            </p-select>
          </div>
          <div
            class="text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap self-start sm:self-center"
          >
            Showing
            <span class="font-semibold text-gray-900 dark:text-white">{{
              filteredReviews.length
            }}</span>
            of
            <span class="font-semibold text-gray-900 dark:text-white">{{
              reviews.length
            }}</span>
            reviews
          </div>
        </div>
      </div>
    </div>

    <!-- Enhanced Reviews Section -->
    <div *ngIf="filteredReviews.length; else emptyState">
      <!-- View Toggle and Header -->
      <div
        class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6"
      >
        <div>
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-1">
            Your Reading Reviews
          </h2>
          <p class="text-sm text-gray-600 dark:text-gray-400">
            {{ filteredReviews.length }}
            {{ filteredReviews.length === 1 ? "review" : "reviews" }} found
          </p>
        </div>
        <div class="flex items-center gap-2">
          <span
            class="text-sm text-gray-600 dark:text-gray-400 mr-2 hidden sm:inline"
            >View:</span
          >
          <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-1 flex">
            <button
              type="button"
              class="px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-200 flex items-center gap-2"
              [class]="
                viewMode === 'grid'
                  ? 'bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm'
                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'
              "
              (click)="viewMode = 'grid'"
            >
              <i class="pi pi-th-large text-xs"></i>
              <span class="hidden sm:inline">Grid</span>
            </button>
            <button
              type="button"
              class="px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-200 flex items-center gap-2"
              [class]="
                viewMode === 'list'
                  ? 'bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm'
                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'
              "
              (click)="viewMode = 'list'"
            >
              <i class="pi pi-list text-xs"></i>
              <span class="hidden sm:inline">List</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Grid View -->
      <div
        *ngIf="viewMode === 'grid'"
        class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"
      >
        <div
          *ngFor="let review of filteredReviews; trackBy: trackByReviewId"
          class="group bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden hover:border-emerald-300 dark:hover:border-emerald-600"
        >
          <!-- Card Header -->
          <div class="p-6 pb-4">
            <div class="flex items-start justify-between mb-3">
              <div class="flex-1 min-w-0">
                <h3
                  class="text-lg font-bold text-gray-900 dark:text-white line-clamp-2 group-hover:text-emerald-600 dark:group-hover:text-emerald-400 transition-colors cursor-pointer"
                  (click)="viewReviewDetails(review)"
                >
                  {{ review.book }}
                </h3>
                <p
                  class="text-sm text-gray-600 dark:text-gray-400 font-medium mt-1"
                >
                  by {{ review.author }}
                </p>
              </div>
              <div class="ml-3 flex-shrink-0">
                <p-tag
                  [value]="
                    review.wouldRecommend ? 'Recommended' : 'Not Recommended'
                  "
                  [severity]="review.wouldRecommend ? 'success' : 'danger'"
                  [icon]="
                    review.wouldRecommend
                      ? 'pi pi-thumbs-up'
                      : 'pi pi-thumbs-down'
                  "
                  class="text-xs"
                >
                </p-tag>
              </div>
            </div>

            <!-- Rating & Date -->
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center gap-2">
                <p-rating
                  [ngModel]="review.rating"
                  [readonly]="true"
                  class="scale-90 origin-left"
                ></p-rating>
                <span
                  class="text-sm font-bold text-amber-600 dark:text-amber-400"
                >
                  {{ review.rating }}/5
                </span>
              </div>
              <span class="text-xs text-gray-500 dark:text-gray-400">
                {{ review.date | date : "MMM d, y" }}
              </span>
            </div>
          </div>

          <!-- Card Content -->
          <div class="px-6 pb-4">
            <div
              class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900/50 dark:to-gray-800/50 rounded-xl p-4 border border-gray-100 dark:border-gray-700"
            >
              <div class="flex items-center gap-2 mb-3">
                <i class="pi pi-lightbulb text-amber-500 text-sm"></i>
                <h4
                  class="text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"
                >
                  Key Takeaways
                </h4>
              </div>
              <p
                class="text-sm leading-relaxed text-gray-700 dark:text-gray-300 line-clamp-4"
              >
                {{ review.takeaways }}
              </p>
              <button
                *ngIf="review.takeaways.length > 150"
                class="text-xs text-emerald-600 dark:text-emerald-400 hover:text-emerald-700 dark:hover:text-emerald-300 mt-2 font-medium"
                (click)="viewReviewDetails(review)"
              >
                Read more...
              </button>
            </div>
          </div>

          <!-- Card Footer -->
          <div class="px-6 pb-6 pt-2">
            <div class="flex gap-2">
              <p-button
                label="View"
                icon="pi pi-eye"
                size="small"
                outlined
                severity="secondary"
                class="flex-1"
                (onClick)="viewReviewDetails(review)"
              >
              </p-button>
              <p-button
                label="Edit"
                icon="pi pi-pencil"
                size="small"
                severity="primary"
                class="flex-1"
                (onClick)="editReview(review)"
              >
              </p-button>
              <p-button
                icon="pi pi-ellipsis-v"
                size="small"
                outlined
                severity="secondary"
                (onClick)="toggleReviewMenu($event, review)"
                #menuButton
              >
              </p-button>
            </div>
          </div>
        </div>
      </div>

      <!-- Review Options Menu -->
      <p-menu
        #reviewMenu
        [model]="reviewMenuItems"
        [popup]="true"
        styleClass="w-48"
      >
      </p-menu>

      <!-- List View -->
      <div *ngIf="viewMode === 'list'" class="space-y-4">
        <div
          *ngFor="let review of filteredReviews; trackBy: trackByReviewId"
          class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 shadow-sm hover:shadow-md transition-all duration-200"
        >
          <div class="flex items-start gap-4">
            <!-- Book Info -->
            <div class="flex-1 min-w-0">
              <div class="flex items-start justify-between mb-3">
                <div class="flex-1">
                  <h3
                    class="text-lg font-bold text-gray-900 dark:text-white mb-1 cursor-pointer hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors"
                    (click)="viewReviewDetails(review)"
                  >
                    {{ review.book }}
                  </h3>
                  <p
                    class="text-sm text-gray-600 dark:text-gray-400 font-medium"
                  >
                    by {{ review.author }}
                  </p>
                </div>
                <div class="flex items-center gap-3">
                  <p-rating
                    [ngModel]="review.rating"
                    [readonly]="true"
                    class="scale-75"
                  ></p-rating>
                  <span
                    class="text-sm font-bold text-amber-600 dark:text-amber-400"
                    >{{ review.rating }}/5</span
                  >
                  <p-tag
                    [value]="
                      review.wouldRecommend ? 'Recommended' : 'Not Recommended'
                    "
                    [severity]="review.wouldRecommend ? 'success' : 'danger'"
                    [icon]="
                      review.wouldRecommend
                        ? 'pi pi-thumbs-up'
                        : 'pi pi-thumbs-down'
                    "
                    class="text-xs"
                  >
                  </p-tag>
                  <span class="text-xs text-gray-500 dark:text-gray-400">{{
                    review.date | date : "MMM d, y"
                  }}</span>
                </div>
              </div>

              <!-- Takeaways -->
              <div class="bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-4">
                <div class="flex items-center gap-2 mb-2">
                  <i class="pi pi-lightbulb text-amber-500 text-sm"></i>
                  <h4
                    class="text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"
                  >
                    Key Takeaways
                  </h4>
                </div>
                <p
                  class="text-sm leading-relaxed text-gray-700 dark:text-gray-300 line-clamp-3"
                >
                  {{ review.takeaways }}
                </p>
              </div>

              <!-- Actions -->
              <div class="flex items-center gap-2">
                <p-button
                  label="View Details"
                  icon="pi pi-eye"
                  size="small"
                  outlined
                  severity="secondary"
                  (onClick)="viewReviewDetails(review)"
                ></p-button>
                <p-button
                  label="Edit"
                  icon="pi pi-pencil"
                  size="small"
                  severity="primary"
                  (onClick)="editReview(review)"
                ></p-button>
                <p-button
                  icon="pi pi-ellipsis-h"
                  size="small"
                  outlined
                  severity="secondary"
                  (onClick)="toggleReviewMenu($event, review)"
                ></p-button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Enhanced Empty State -->
    <ng-template #emptyState>
      <div
        class="bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-12 text-center"
      >
        <div class="max-w-md mx-auto">
          <!-- Illustration -->
          <div
            class="w-24 h-24 bg-gradient-to-br from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30 rounded-full flex items-center justify-center mx-auto mb-6"
          >
            <i
              class="pi pi-book text-4xl text-emerald-600 dark:text-emerald-400"
            ></i>
          </div>

          <!-- Content -->
          <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-3">
            No reviews yet
          </h3>
          <p class="text-gray-600 dark:text-gray-400 mb-8 leading-relaxed">
            Start documenting your reading journey! Share insights, rate books,
            and build a valuable collection of your learning experiences.
          </p>

          <!-- Action Buttons -->
          <div class="flex flex-col sm:flex-row gap-3 justify-center">
            <p-button
              label="Add Your First Review"
              icon="pi pi-plus"
              size="large"
              severity="success"
              (onClick)="addReviewPage()"
            >
            </p-button>
            <p-button
              label="Quick Add"
              icon="pi pi-plus-circle"
              size="large"
              outlined
              severity="success"
              (onClick)="showReviewForm = true"
            >
            </p-button>
          </div>

          <!-- Tips -->
          <div
            class="mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"
          >
            <div class="flex items-start gap-3">
              <i
                class="pi pi-info-circle text-blue-600 dark:text-blue-400 mt-0.5"
              ></i>
              <div class="text-left">
                <h4
                  class="text-sm font-semibold text-blue-900 dark:text-blue-200 mb-1"
                >
                  Pro Tip
                </h4>
                <p class="text-xs text-blue-700 dark:text-blue-300">
                  Document key takeaways immediately after reading. Include
                  specific quotes, actionable insights, and how you plan to
                  apply what you learned.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>

    <!-- Enhanced Quick Add Dialog -->
    <p-dialog
      [(visible)]="showReviewForm"
      header="Quick Add Review"
      [modal]="true"
      [draggable]="false"
      [style]="{ width: '36rem' }"
      [breakpoints]="{ '960px': '90vw', '640px': '95vw' }"
      (onHide)="clearNewReview()"
      styleClass="border-0 shadow-2xl"
    >
      <ng-template pTemplate="header">
        <div class="flex items-center gap-3">
          <div
            class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center"
          >
            <i class="pi pi-plus text-white"></i>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
              Quick Add Review
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Capture your reading insights quickly
            </p>
          </div>
        </div>
      </ng-template>

      <form (ngSubmit)="submitReview()" class="space-y-6 mt-4">
        <!-- Book Information -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label
              for="quickBook"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              <i class="pi pi-book mr-1"></i>Book Title *
            </label>
            <input
              pInputText
              id="quickBook"
              name="quickBook"
              type="text"
              [(ngModel)]="newReview.book"
              required
              placeholder="Enter book title"
              class="w-full"
            />
          </div>

          <div>
            <label
              for="quickAuthor"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              <i class="pi pi-user mr-1"></i>Author *
            </label>
            <input
              pInputText
              id="quickAuthor"
              name="quickAuthor"
              type="text"
              [(ngModel)]="newReview.author"
              required
              placeholder="Enter author name"
              class="w-full"
            />
          </div>
        </div>

        <!-- Rating and Recommendation -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"
            >
              <i class="pi pi-star mr-1"></i>Your Rating *
            </label>
            <div
              class="flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700"
            >
              <p-rating
                [(ngModel)]="newReview.rating"
                name="quickRating"
                class="scale-110"
              >
              </p-rating>
              <span
                class="text-lg font-bold text-amber-600 dark:text-amber-400"
              >
                {{ newReview.rating || 0 }}/5
              </span>
            </div>
          </div>

          <div>
            <label
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"
            >
              <i class="pi pi-thumbs-up mr-1"></i>Would you recommend? *
            </label>
            <div class="flex gap-2">
              <p-button
                type="button"
                label="Yes"
                icon="pi pi-thumbs-up"
                [severity]="
                  newReview.wouldRecommend === true ? 'success' : 'secondary'
                "
                [outlined]="newReview.wouldRecommend !== true"
                (onClick)="newReview.wouldRecommend = true"
                class="flex-1"
              >
              </p-button>
              <p-button
                type="button"
                label="No"
                icon="pi pi-thumbs-down"
                [severity]="
                  newReview.wouldRecommend === false ? 'danger' : 'secondary'
                "
                [outlined]="newReview.wouldRecommend !== false"
                (onClick)="newReview.wouldRecommend = false"
                class="flex-1"
              >
              </p-button>
            </div>
          </div>
        </div>

        <!-- Takeaways -->
        <div>
          <label
            for="quickTakeaways"
            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
          >
            <i class="pi pi-lightbulb mr-1"></i>Key Takeaways & Insights *
          </label>
          <textarea
            pInputTextarea
            id="quickTakeaways"
            name="quickTakeaways"
            rows="5"
            [(ngModel)]="newReview.takeaways"
            required
            placeholder="What did you learn? Share memorable quotes, actionable insights, or how this book changed your perspective..."
            class="w-full resize-y"
          >
          </textarea>
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
            Include specific quotes, main concepts, or practical applications
          </p>
        </div>

        <!-- Form Actions -->
        <div
          class="flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700"
        >
          <p-button
            type="button"
            label="Need detailed form?"
            severity="secondary"
            text
            size="small"
            (onClick)="goToFullForm()"
          >
          </p-button>

          <div class="flex gap-3">
            <p-button
              type="button"
              label="Cancel"
              severity="secondary"
              outlined
              (onClick)="showReviewForm = false"
            >
            </p-button>
            <p-button
              type="submit"
              label="Save Review"
              icon="pi pi-check"
              severity="success"
              [disabled]="!isQuickFormValid()"
            >
            </p-button>
          </div>
        </div>
      </form>
    </p-dialog>
  </div>
</div>
