<div class="min-h-screen from-slate-50 via-blue-50 to-indigo-50">
  <!-- Modern Header Section with Tailwind -->
  <header class="sticky top-0 z-50 w-full my-10">
    <div
      class="container flex h-16 max-w-screen-2xl items-center px-4 sm:px-6 lg:px-8"
    >
      <div class="flex w-full items-center justify-between">
        <!-- Brand Section -->
        <div class="flex items-center gap-4">
          <div
            class="flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-blue-500 to-violet-600 shadow-lg shadow-blue-500/25"
          >
            <svg
              class="h-6 w-6 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
              ></path>
            </svg>
          </div>
          <div class="hidden md:block">
            <h1 class="text-xl font-bold tracking-tight sm:text-2xl">
              Analytics Dashboard
            </h1>
            <p class="text-sm">Insights into your reading journey</p>
          </div>
        </div>

        <!-- Filters & Actions Section -->
        <div class="flex items-center gap-3">
          <!-- Genre Filter -->
          <div
            class="flex items-center gap-2 rounded-xl px-3 py-2 transition-all"
          >
            <p-select
              [options]="genreOptions"
              [(ngModel)]="selectedGenre"
              optionLabel="label"
              placeholder="All Genres"
              class="w-32 text-sm lg:w-40"
              (onChange)="updateDashboard()"
            >
            </p-select>
          </div>

          <!-- Author Filter -->
          <div
            class="flex items-center gap-2 rounded-xl px-3 py-2 transition-all"
          >
            <p-select
              [options]="authorOptions"
              [(ngModel)]="selectedAuthor"
              optionLabel="label"
              placeholder="All Authors"
              class="w-32 text-sm lg:w-40"
              (onChange)="updateDashboard()"
            >
            </p-select>
          </div>

          <!-- Action Buttons -->
          <div class="flex items-center gap-2">
            <button
              (click)="resetFilters()"
              class="inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 shadow-sm transition-all hover:bg-slate-50 hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
            >
              <svg
                class="h-4 w-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                ></path>
              </svg>
              <span class="hidden sm:inline">Reset</span>
            </button>

            <button
              (click)="exportData()"
              class="inline-flex items-center gap-2 rounded-lg bg-blue-600 px-3 py-2 text-sm font-medium text-white shadow-sm transition-all hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
            >
              <svg
                class="h-4 w-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                ></path>
              </svg>
              <span class="hidden sm:inline">Export</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="max-w-7xl mx-auto px-6 py-8">
    <!-- KPI Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- Total Books Card -->
      <div
        class="card-container card rounded-2xl p-6 transition-all duration-300 group"
      >
        <div class="flex items-center justify-between mb-4">
          <div
            class="p-3 bg-blue-100 rounded-xl group-hover:bg-blue-200 transition-colors"
          >
            <i class="pi pi-book text-blue-600 text-xl"></i>
          </div>
          <span
            class="text-xs font-medium bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-full"
            >TOTAL</span
          >
        </div>
        <div class="space-y-1">
          <p class="text-3xl font-bold dark:text-white">
            {{ formatNumber(stats.totalBooks) }}
          </p>
          <p class="text-sm text-gray-600 dark:text-gray-300">Books Read</p>
          <div
            class="flex items-center gap-1 text-xs"
            [ngClass]="getTrendColor(stats.trends.books.isPositive)"
          >
            <i [ngClass]="getTrendIcon(stats.trends.books.isPositive)"></i>
            <span>{{ stats.trends.books.value }}% vs last month</span>
          </div>
        </div>
      </div>

      <!-- Pages Read Card -->
      <div
        class="card-container card rounded-2xl p-6 transition-all duration-300 group"
      >
        <div class="flex items-center justify-between mb-4">
          <div
            class="p-3 bg-emerald-100 rounded-xl group-hover:bg-emerald-200 transition-colors"
          >
            <i class="pi pi-file text-emerald-600 text-xl"></i>
          </div>
          <span
            class="text-xs font-medium text-gray-500 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full"
            >PAGES</span
          >
        </div>
        <div class="space-y-1">
          <p class="text-3xl font-bold text-gray-900 dark:text-white">
            {{ formatNumber(stats.totalPages) }}
          </p>
          <p class="text-sm text-gray-600 dark:text-gray-300">Pages Read</p>
          <div
            class="flex items-center gap-1 text-xs"
            [ngClass]="getTrendColor(stats.trends.pages.isPositive)"
          >
            <i [ngClass]="getTrendIcon(stats.trends.pages.isPositive)"></i>
            <span>{{ stats.trends.pages.value }}% vs last month</span>
          </div>
        </div>
      </div>

      <!-- Average Rating Card -->
      <div
        class="card-container card rounded-2xl p-6 transition-all duration-300 group"
      >
        <div class="flex items-center justify-between mb-4">
          <div
            class="p-3 bg-amber-100 rounded-xl group-hover:bg-amber-200 transition-colors"
          >
            <i class="pi pi-star text-amber-600 text-xl"></i>
          </div>
          <span
            class="text-xs font-medium text-gray-500 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full"
            >RATING</span
          >
        </div>
        <div class="space-y-1">
          <p class="text-3xl font-bold text-gray-900 dark:text-white">
            {{ stats.avgRating }}
          </p>
          <p class="text-sm text-gray-600 dark:text-gray-300">Average Rating</p>
          <div class="flex items-center gap-1">
            <div class="flex gap-1">
              <i
                class="pi pi-star-fill text-amber-400 text-xs"
                *ngFor="let star of [1, 2, 3, 4]"
              ></i>
              <i class="pi pi-star text-amber-300 text-xs"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Reading Hours Card -->
      <div
        class="card-container card rounded-2xl p-6 transition-all duration-300 group"
      >
        <div class="flex items-center justify-between mb-4">
          <div
            class="p-3 bg-purple-100 rounded-xl group-hover:bg-purple-200 transition-colors"
          >
            <i class="pi pi-clock text-purple-600 text-xl"></i>
          </div>
          <span
            class="text-xs font-medium text-gray-500 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-full"
            >HOURS</span
          >
        </div>
        <div class="space-y-1">
          <p class="text-3xl font-bold text-gray-900 dark:text-white">
            {{ formatNumber(stats.totalHours) }}
          </p>
          <p class="text-sm text-gray-600 dark:text-gray-300">Reading Hours</p>
          <div
            class="flex items-center gap-1 text-xs"
            [ngClass]="getTrendColor(stats.trends.hours.isPositive)"
          >
            <i [ngClass]="getTrendIcon(stats.trends.hours.isPositive)"></i>
            <span>{{ stats.trends.hours.value }}% vs last month</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts Grid -->
    <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
      <!-- Reading Trend Chart -->
      <div class="card rounded-2xl p-6 transition-all duration-300">
        <div class="flex items-center justify-between mb-6">
          <div class="flex items-center gap-3">
            <div class="p-2 bg-blue-100 dark:bg-blue-200 rounded-lg">
              <i class="pi pi-chart-line text-blue-600 dark:text-blue-400"></i>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                Reading Trend
              </h3>
              <p class="text-sm text-gray-600 dark:text-gray-300">
                Monthly books & pages
              </p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <span
              class="inline-flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-200 text-green-700 dark:text-green-800 text-xs font-medium rounded-full"
            >
              <i class="pi pi-arrow-up text-xs"></i>
              +23%
            </span>
          </div>
        </div>

        <apx-chart
          #readingTrendChartComponent
          [series]="readingTrendChart.series"
          [chart]="readingTrendChart.chart"
          [xaxis]="readingTrendChart.xaxis!"
          [stroke]="readingTrendChart.stroke!"
          [colors]="readingTrendChart.colors!"
          [tooltip]="readingTrendChart.tooltip!"
          [legend]="readingTrendChart.legend!"
          [fill]="readingTrendChart.fill!"
          [grid]="readingTrendChart.grid!"
          [markers]="readingTrendChart.markers!"
          [yaxis]="readingTrendChart.yaxis!"
        >
        </apx-chart>
      </div>

      <!-- Genre Distribution Chart -->
      <div class="card rounded-2xl p-6 transition-all duration-300">
        <div class="flex items-center justify-between mb-6">
          <div class="flex items-center gap-3">
            <div class="p-2 bg-purple-100 dark:bg-purple-200 rounded-lg">
              <i
                class="pi pi-chart-pie text-purple-600 dark:text-purple-800"
              ></i>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                Genre Distribution
              </h3>
              <p class="text-sm text-gray-600 dark:text-gray-300">
                Reading preferences
              </p>
            </div>
          </div>
          <div
            class="flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400"
          >
            <i class="pi pi-info-circle"></i>
            <span>Click to filter</span>
          </div>
        </div>

        <apx-chart
          #genrePieChartComponent
          [series]="genrePieChart.series"
          [chart]="genrePieChart.chart"
          [labels]="genrePieChart.labels!"
          [legend]="genrePieChart.legend!"
          [tooltip]="genrePieChart.tooltip!"
          [colors]="genrePieChart.colors!"
          [plotOptions]="genrePieChart.plotOptions!"
          [dataLabels]="genrePieChart.dataLabels!"
          [responsive]="genrePieChart.responsive!"
          (dataPointSelection)="onGenreClick($event)"
        >
        </apx-chart>
      </div>

      <!-- Monthly Spending Chart -->
      <div class="card rounded-2xl p-6 transition-all duration-300">
        <div class="flex items-center justify-between mb-6">
          <div class="flex items-center gap-3">
            <div class="p-2 bg-emerald-100 dark:bg-emerald-200 rounded-lg">
              <i
                class="pi pi-dollar text-emerald-600 dark:text-emerald-800"
              ></i>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                Monthly Spending
              </h3>
              <p class="text-sm text-gray-600 dark:text-gray-300">
                Book purchases
              </p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <span
              class="inline-flex items-center gap-1 px-2 py-1 bg-red-100 dark:bg-red-200 text-red-700 dark:text-red-800 text-xs font-medium rounded-full"
            >
              <i class="pi pi-arrow-down text-xs"></i>
              -5%
            </span>
          </div>
        </div>
        <apx-chart
          #spendingBarChartComponent
          [series]="spendingBarChart.series"
          [chart]="spendingBarChart.chart"
          [plotOptions]="spendingBarChart.plotOptions!"
          [xaxis]="spendingBarChart.xaxis!"
          [colors]="spendingBarChart.colors!"
          [tooltip]="spendingBarChart.tooltip!"
          [fill]="spendingBarChart.fill!"
          [grid]="spendingBarChart.grid!"
          [dataLabels]="spendingBarChart.dataLabels!"
          [yaxis]="spendingBarChart.yaxis!"
        >
        </apx-chart>
      </div>

      <!-- Rating Distribution Chart -->
      <div class="card rounded-2xl p-6 transition-all duration-300">
        <div class="flex items-center justify-between mb-6">
          <div class="flex items-center gap-3">
            <div class="p-2 bg-amber-100 dark:bg-amber-200 rounded-lg">
              <i class="pi pi-star text-amber-600 dark:text-amber-800"></i>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                Rating Distribution
              </h3>
              <p class="text-sm text-gray-600 dark:text-gray-300">
                Book ratings breakdown
              </p>
            </div>
          </div>
          <div class="flex items-center gap-1">
            <i class="pi pi-star-fill text-amber-400 text-sm"></i>
            <span
              class="text-sm font-medium text-gray-700 dark:text-gray-300"
              >{{ stats.avgRating }}</span
            >
          </div>
        </div>
        <apx-chart
          #ratingDistributionChartComponent
          [series]="ratingDistributionChart.series"
          [chart]="ratingDistributionChart.chart"
          [xaxis]="ratingDistributionChart.xaxis!"
          [yaxis]="ratingDistributionChart.yaxis!"
          [plotOptions]="ratingDistributionChart.plotOptions!"
          [tooltip]="ratingDistributionChart.tooltip!"
        >
        </apx-chart>
      </div>

      <!-- Author Leaderboard Chart -->
      <div class="card rounded-2xl p-6 transition-all duration-300">
        <div class="flex items-center justify-between mb-6">
          <div class="flex items-center gap-3">
            <div class="p-2 bg-rose-100 dark:bg-rose-200 rounded-lg">
              <i class="pi pi-users text-rose-600 dark:text-rose-800"></i>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                Top Authors
              </h3>
              <p class="text-sm text-gray-600 dark:text-gray-300">
                Most read authors
              </p>
            </div>
          </div>
          <div
            class="flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400"
          >
            <i class="pi pi-info-circle"></i>
            <span>Click to filter</span>
          </div>
        </div>
        <apx-chart
          #authorLeaderboardChartComponent
          [series]="authorLeaderboardChart.series"
          [chart]="authorLeaderboardChart.chart"
          [plotOptions]="authorLeaderboardChart.plotOptions!"
          [xaxis]="authorLeaderboardChart.xaxis!"
          [yaxis]="authorLeaderboardChart.yaxis!"
          [tooltip]="authorLeaderboardChart.tooltip!"
          (dataPointSelection)="onAuthorClick($event)"
        >
        </apx-chart>
      </div>

      <!-- Completion Rate Card -->
      <div class="card rounded-2xl p-6 transition-all duration-300">
        <div class="flex items-center justify-between mb-6">
          <div class="flex items-center gap-3">
            <div class="p-2 bg-rose-100 dark:bg-rose-200 rounded-lg">
              <i
                class="pi pi-check-circle text-rose-600 dark:text-rose-800"
              ></i>
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                Reading Progress
              </h3>
              <p class="text-sm text-gray-600 dark:text-gray-300">
                Books completion status
              </p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <span
              class="inline-flex items-center gap-1 px-2 py-1 bg-rose-100 dark:bg-rose-200 text-rose-700 dark:text-rose-800 text-xs font-medium rounded-full"
            >
              <i [class]="getTrendIcon(stats.trends.completion.isPositive)"></i>
              {{ stats.trends.completion.value }}% vs last month
            </span>
          </div>
        </div>
        <div class="flex flex-col items-center justify-center">
          <apx-chart
            #completionRadialChartComponent
            [series]="completionRadialChart.series"
            [chart]="completionRadialChart.chart"
            [plotOptions]="completionRadialChart.plotOptions!"
            [labels]="completionRadialChart.labels!"
            [tooltip]="completionRadialChart.tooltip!"
            class="completion-radial-chart"
          >
          </apx-chart>
        </div>
      </div>
    </div>

    <!-- Full Width Reading Streak Section -->
    <div class="w-full mt-8">
      <app-reading-streak> </app-reading-streak>
    </div>
  </div>
</div>
